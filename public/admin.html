<!-- TITLE: Admin Panel - Airline Manager -->
<!-- SUBTITLE: Administration -->
<!-- SCRIPTS: /js/admin.js -->

<div class="world-selection-container">
  <div class="selection-header">
    <h1>USER MANAGEMENT</h1>
    <p class="subtitle">MANAGE USERS, PERMISSIONS, AND CREDITS</p>
  </div>

  <div class="worlds-section">
    <div class="form-group">
      <label for="searchUserInput">SEARCH USER BY VATSIM ID OR NAME</label>
      <input type="text" id="searchUserInput" placeholder="Enter VATSIM ID or name..." onkeyup="searchUsers()">
    </div>

    <h2 class="section-title">ALL USERS</h2>
    <div id="usersTable">
      <table style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr style="background: var(--surface); border-bottom: 2px solid var(--border-color);">
            <th style="padding: 1rem; text-align: left; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted);">VATSIM ID</th>
            <th style="padding: 1rem; text-align: left; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted);">NAME</th>
            <th style="padding: 1rem; text-align: left; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted);">EMAIL</th>
            <th style="padding: 1rem; text-align: center; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted);">ACTIVE WORLDS</th>
            <th style="padding: 1rem; text-align: center; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted);">CREDITS</th>
            <th style="padding: 1rem; text-align: center; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted);">PERMISSIONS</th>
            <th style="padding: 1rem; text-align: center; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted);">ACTIONS</th>
          </tr>
        </thead>
        <tbody id="usersTableBody">
          <tr>
            <td colspan="7" style="padding: 2rem; text-align: center; color: var(--text-muted);">Loading users...</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Edit Credits Modal -->
<div id="editCreditsModal" class="modal" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h2>ADJUST CREDITS</h2>
      <button class="modal-close" onclick="closeEditModal()">&times;</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label>USER</label>
        <div id="editUserName" class="form-value"></div>
      </div>

      <div class="form-group">
        <label>CURRENT CREDITS</label>
        <div id="editCurrentCredits" class="form-value"></div>
      </div>

      <div class="form-group">
        <label for="newCredits">NEW CREDITS VALUE</label>
        <input type="number" id="newCredits" placeholder="Enter new credits value">
      </div>

      <div class="form-info">
        <p>Enter the new total credits for this user.</p>
        <p>Credits are consumed at 1 credit per game week.</p>
        <p>Users can continue playing down to -4 credits (1 game month grace period).</p>
      </div>

      <div id="editError" class="error-message" style="display: none;"></div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" onclick="closeEditModal()">Cancel</button>
      <button class="btn btn-primary" onclick="confirmEdit()">Update Credits</button>
    </div>
  </div>
</div>

<!-- Permission Update Modal -->
<div id="permissionModal" class="modal" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h2>UPDATE USER PERMISSIONS</h2>
      <button class="modal-close" onclick="closePermissionModal()">&times;</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label>USER</label>
        <div id="permissionUserName" class="form-value"></div>
      </div>

      <div class="form-group">
        <label for="isAdminSelect">ADMIN PERMISSION</label>
        <select id="isAdminSelect">
          <option value="false">Standard User</option>
          <option value="true">Admin User</option>
        </select>
      </div>

      <div class="form-group">
        <label for="isContributorSelect">CONTRIBUTOR PERMISSION</label>
        <select id="isContributorSelect">
          <option value="false">Standard User</option>
          <option value="true">Contributor (Elevated)</option>
        </select>
      </div>

      <div class="form-info">
        <p><strong>Admin User:</strong> Full administrative access to the system</p>
        <p><strong>Contributor (Elevated):</strong> Enhanced permissions (to be defined)</p>
        <p><strong>Standard User:</strong> Regular user access</p>
      </div>

      <div id="permissionError" class="error-message" style="display: none;"></div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" onclick="closePermissionModal()">Cancel</button>
      <button class="btn btn-primary" onclick="confirmPermissionUpdate()">Update Permissions</button>
    </div>
  </div>
</div>
